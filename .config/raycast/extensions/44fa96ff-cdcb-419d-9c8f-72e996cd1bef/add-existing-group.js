var u=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var G=Object.prototype.hasOwnProperty;var P=t=>u(t,"__esModule",{value:!0});var w=(t,a)=>{for(var o in a)u(t,o,{get:a[o],enumerable:!0})},F=(t,a,o,n)=>{if(a&&typeof a=="object"||typeof a=="function")for(let r of y(a))!G.call(t,r)&&(o||r!=="default")&&u(t,r,{get:()=>a[r],enumerable:!(n=W(a,r))||n.enumerable});return t};var b=(t=>(a,o)=>t&&t.get(a)||(o=F(P({}),a,1),t&&t.set(a,o),o))(typeof WeakMap!="undefined"?new WeakMap:0);var v={};w(v,{default:()=>l});var e=require("@raycast/api");function c(t){return t.groupCode!==void 0}var i=require("react");var s=require("@raycast/api"),m="whatsapp-chats";async function f(){return JSON.parse(await(0,s.getLocalStorageItem)(m)||"[]")}async function A(t){await(0,s.setLocalStorageItem)(m,JSON.stringify(t))}function g(){let[t,a]=(0,i.useState)();return(0,i.useEffect)(()=>{f().then(o=>{a(o)})},[]),{chats:t||[],isLoading:t===void 0,updateChats:async o=>{a(o),await A(o)}}}function l({defaultValue:t}){let{chats:a,updateChats:o}=g(),n=!t;async function r(h){let p={id:n?(0,e.randomId)():t.id,name:h.name,pinned:!!h.pinned,groupCode:h.groupCode},x=n||p.groupCode!==t.groupCode,S=a.filter(c).some(d=>d.groupCode===p.groupCode);if(x&&S){await(0,e.showToast)(e.ToastStyle.Failure,"Chat already exists");return}if(n)await o([...a,p]),await(0,e.showToast)(e.ToastStyle.Success,"Created new group",p.name);else{let d=a.map(C=>C.id===p.id?p:C);await o(d),await(0,e.showToast)(e.ToastStyle.Success,"Updated existing group",p.name)}await(0,e.popToRoot)({clearSearchBar:!0})}return _jsx(e.Form,{actions:_jsx(e.ActionPanel,null,_jsx(e.SubmitFormAction,{title:"Save Group",onSubmit:r}))},_jsx(e.Form.TextField,{id:"name",title:"Name",placeholder:"Raycasters",defaultValue:t?.name}),_jsx(e.Form.TextField,{id:"groupCode",title:"Group Code",placeholder:"LkXPP0Lij10I3OYynP3MXb",defaultValue:t?.groupCode}),_jsx(e.Form.Checkbox,{id:"pinned",label:"Pinned Chat",defaultValue:t?.pinned}))}module.exports=b(v);0&&(module.exports={});
